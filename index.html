<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang Chủ - SmartTKB</title>
    <!-- Thư viện CSS/JS Online (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- Load File Dùng Chung -->
    <script type="text/babel" src="js/common.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        function DashboardPage() {
            const [stats, setStats] = React.useState({ t: 0, c: 0, s: 0, a: 0 });

            React.useEffect(() => {
                const load = async () => {
                    const [t, c, s, a] = await Promise.all([
                        window.api.call("/teachers/"),
                        window.api.call("/classes/"),
                        window.api.call("/subjects/"),
                        window.api.call("/assignments/")
                    ]);
                    setStats({
                        t: t?.length || 0,
                        c: c?.length || 0,
                        s: s?.length || 0,
                        a: a?.length || 0
                    });
                };
                load();
            }, []);

            const Card = ({ title, val, color }) => (
                <div className={`p-6 rounded-xl bg-white shadow-sm border-l-4 ${color}`}>
                    <h3 className="text-gray-500 text-sm font-bold uppercase">{title}</h3>
                    <p className="text-4xl font-bold text-gray-800 mt-2">{val}</p>
                </div>
            );

            return (
                <window.AppLayout>
                    <div className="mb-8">
                        <h1 className="text-3xl font-bold text-gray-900">Tổng quan hệ thống</h1>
                        <p className="text-gray-500">Dữ liệu hiện tại trên hệ thống.</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <Card title="Giáo viên" val={stats.t} color="border-blue-500" />
                        <Card title="Lớp học" val={stats.c} color="border-green-500" />
                        <Card title="Môn học" val={stats.s} color="border-purple-500" />
                        <Card title="Phân công" val={stats.a} color="border-orange-500" />
                    </div>
                </window.AppLayout>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<DashboardPage />);
    </script>
</body>
</html>
